commands:

sudo systemctl restart docker
sudo docker swarm leave --force
Sudo docker swarm init
sudo docker node ls
sudo docker-compose -f docker-compose.yml up -d
sudo docker-compose -f docker-compose2.yml down
sudo docker stack deploy -c docker-compose2.yml my_stack_name
sudo reboot

after executing these commands  with the given .yml file, the cluster of nodes should all be up and working. 

.............
labeling placement constraints

docker node update --label-add mongo=replica <worker-node-id>

docker node update --label-add mongo=manager <manager-node-id>

.................

labeling placement preferences

docker node update --label-add rack=1 --label-add datacenter=us-east <node-id>
docker node update --label-add rack=2 --label-add datacenter=us-west <node-id>


